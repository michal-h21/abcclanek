<?xml version="1.0" encoding="utf-8" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" 
"http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd" > 
<html xml:lang="cs" xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>Pracujeme s TeX4ht</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<!-- xhtml,charset=utf-8,mathml,fn-in,html --> 
<meta name="src" content="abcclanek.tex" /> 
<meta name="date" content="2013-11-21 12:57:00" /> 
<link rel="stylesheet" type="text/css" href="abcclanek.css" /> 
</head><body 
>
   <div class="maketitle">
                                                                  

                                                                  
                                                                  

                                                                  

<h2 class="titleHead">Pracujeme s TeX4ht</h2>
<div class="author" ><span class="ecrm-1200">Michal Hoftich</span></div><br />
<div class="date" ><span class="ecrm-1200">21. listopadu 2013</span></div>
   </div>
   <h3 class="likesectionHead"><a 
 id="x1-1000"></a>Obsah</h3>
   <div class="tableofcontents">
   <span class="sectionToc" >1 <a 
href="#x1-20001" id="QQ2-1-2">Úvod</a></span>
<br />   <span class="sectionToc" >2 <a 
href="#x1-30002" id="QQ2-1-3">Proč TeX4ht?</a></span>
<br />    <span class="subsectionToc" >2.1 <a 
href="#x1-40002.1" id="QQ2-1-4">Na co konfigurace?</a></span>
<br />   <span class="sectionToc" >3 <a 
href="#x1-50003" id="QQ2-1-5">Proč </a></span>
<br />   <span class="sectionToc" >4 <a 
href="#x1-60004" id="QQ2-1-6">Čeština</a></span>
<br />   <span class="sectionToc" >5 <a 
href="#x1-70005" id="QQ2-1-7">Konfigurace balíčků</a></span>
<br />   <span class="sectionToc" ><a 
href="#x1-80005" id="QQ2-1-8">Odkazy</a></span>
   </div>
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-20001"></a>Úvod</h3>
<!--l. 38--><p class="noindent" >V <a 
href="http://www.abclinuxu.cz/clanky/tex-5-priklad-makra-pro-generovani-html" >článku na Abclinuxu.cz</a> pan Olšák (<a id="page.3"></a><a 
href="abcclanek.html#X0-Olsak13" >2013</a>) popisuje konverzi <span class="TEX">T<span class="E">E</span>X</span>ového
souboru na html. Pod článkem se rozeběhla zajímavá debata nejen o
nejlepším způsobu konverze (La)<span class="TEX">T<span class="E">E</span>X</span>u, ale také obecně o tom jestli má smysl
psát dokumenty v <span class="TEX">T<span class="E">E</span>X</span>u, nebo spíše v nělterém značkovacím jazyce, ať
již je to některý dialekt xml, nebo třeba Markdown.
</p><!--l. 43--><p class="indent" >   Protože mám jisté zkušenosti s používáním
<a 
href="#glo:tex4ht">TeX4ht</a><span class="footnote-mark"><a 
href="#fn1x0" id="fn1x0-bk"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-2001f1"></a>,
rozhodl jsem se vytvořit krátký článek o jeho používání s češtinou a
kódováním utf-8. V článku také ukážu použití některých balíčků,
například <span class="obeylines-h"><span class="verb"><span class="ectt-1000">biblatex</span></span></span>, <span class="obeylines-h"><span class="verb"><span class="ectt-1000">glossaries</span></span></span>, nebo <span class="obeylines-h"><span class="verb"><span class="ectt-1000">minted</span></span></span>.
</p><!--l. 50--><p class="indent" >   Zdrojové kódy tohoto článku jsou dostupné na <a 
href="https://github.com/michal-h21/abcclanek" >Githubu</a>.
                                                                  

                                                                  
</p><!--l. 52--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-30002"></a>Proč TeX4ht?</h3>
<!--l. 54--><p class="noindent" ><a 
href="#glo:tex4ht">TeX4ht</a> se vyvíjí od druhé poloviny 90. let, v podstatě jako dílo jediného
autora, Eitana Gurariho. Tento autor bohužel před několika lety zemřel a v
současnosti patrně není nikdo, kdo by se v kódu plně orientoval a vývoj
mírně řečeno stagnuje.
</p><!--l. 59--><p class="indent" >   Na druhou stranu, v současnosti je nejlepším konvertorem z <span class="LATEX">L<span class="A">A</span><span class="TEX">T<span class="E">E</span>X</span></span>u a
poskytuje funkční infrastrukturu pro konfigurací libovolných maker. V
současnosti je na tvůrcích balíčků nebo jejich uživatelích, aby poskytovali
tyto konfigurace, není v reálných silách současných správců, aby tvořili
konfigurace pro všechny balíčky.
</p><!--l. 64--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.1   </span> <a 
 id="x1-40002.1"></a>Na co konfigurace?</h4>
<!--l. 66--><p class="noindent" >Bez konfigurací bychom nezískali logické značkování, postprocesor <a 
href="#glo:tex4ht-post">tex4ht</a>
sice vytvoří výstupní soubory, ale ty by obsahovaly jen vizuální
formátování získané z dvi souboru, bez jakékoliv logické struktury
(nadpisy, seznamy, odkazy).
</p><!--l. 69--><p class="indent" >   Proto <a 
href="#glo:tex4ht">TeX4ht</a> obsahuje mechanismus <a 
href="#glo:s4ht">.4ht</a> souborů, které jsou automaticky
nahrávané spolu s balíčkem téhož jména a kde jsou umístěné redefinice
některých maker, aby bylo možné je konfigurovat. Více informací v sekci
<a 
href="#x1-70005">5<!--tex4ht:ref: sec:config --></a>
</p><!--l. 74--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-50003"></a>Proč </h3>
<!--l. 76--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-60004"></a>Čeština</h3>
<!--l. 78--><p class="noindent" >Mejme hypotetický článek pro Xe<span class="LATEX">L<span class="A">A</span><span class="TEX">T<span class="E">E</span>X</span></span>, který se budeme snažit přeložit s
<a 
href="#glo:tex4ht">TeX4ht</a>:
</p><!--l. 1--><p class="indent" >
</p>
   <div class="fancyvrb" id="fancyvrb1"><a 
 id="x1-6002r1"></a><span class="ectt-1000">  </span><span id="textcolor1"><span class="ectt-1000">\documentclass</span></span><span id="textcolor2"><span class="ectt-1000">{</span></span><span class="ectt-1000">article</span><span id="textcolor3"><span class="ectt-1000">}</span></span><br class="fancyvrb" /><a 
 id="x1-6004r2"></a><span class="ectt-1000">  </span><span id="textcolor4"><span class="ectt-1000">\usepackage</span></span><span id="textcolor5"><span class="ectt-1000">{</span></span><span class="ectt-1000">fontspec</span><span id="textcolor6"><span class="ectt-1000">}</span></span><br class="fancyvrb" /><a 
 id="x1-6006r3"></a><span class="ectt-1000">  </span><span id="textcolor7"><span class="ectt-1000">\setmainfont</span></span><span id="textcolor8"><span class="ectt-1000">{</span></span><span class="ectt-1000">Linux Libertine O</span><span id="textcolor9"><span class="ectt-1000">}</span></span>
<br class="fancyvrb" /><a 
 id="x1-6008r4"></a><span class="ectt-1000">  </span><span id="textcolor10"><span class="ectt-1000">\begin</span></span><span id="textcolor11"><span class="ectt-1000">{</span></span><span class="ectt-1000">document</span><span id="textcolor12"><span class="ectt-1000">}</span></span><br class="fancyvrb" /><a 
 id="x1-6010r5"></a><span class="ectt-1000">  Příliš žluťoučký kůň úpěl </span><span id="textcolor13"><span class="ectt-1000">\textit</span></span><span id="textcolor14"><span class="ectt-1000">{</span></span><span class="ectt-1000">ďábelské ódy</span><span id="textcolor15"><span class="ectt-1000">}</span></span><span class="ectt-1000">.</span>
<br class="fancyvrb" /><a 
 id="x1-6012r6"></a><span class="ectt-1000">  Vyzkoušíme si také ligatury: grafika, finance, ffi.</span><br class="fancyvrb" /><a 
 id="x1-6014r7"></a><span class="ectt-1000">  </span><br class="fancyvrb" /><a 
 id="x1-6016r8"></a><span class="ectt-1000">  </span><span id="textcolor16"><span class="ectt-1000">\end</span></span><span id="textcolor17"><span class="ectt-1000">{</span></span><span class="ectt-1000">document</span><span id="textcolor18"><span class="ectt-1000">}</span></span></div>
                                                                  

                                                                  
<!--l. 82--><p class="indent" >   <a 
href="#glo:tex4ht">TeX4ht</a> obsahuje množství skriptů pro překlad dokumentů. Nejběžnější
je <span class="obeylines-h"><span class="verb"><span class="ectt-1000">htlatex</span></span></span>, který překládá dokument čístým <span class="LATEX">L<span class="A">A</span><span class="TEX">T<span class="E">E</span>X</span></span>em. Protože máš
dokument je určený pro Xe<span class="LATEX">L<span class="A">A</span><span class="TEX">T<span class="E">E</span>X</span></span>, můžeme zkusit variantu tohoto skriptu,
<span class="obeylines-h"><span class="verb"><span class="ectt-1000">htxelatex</span></span></span>.
</p><!--l. 1--><p class="indent" >
</p>
   <div class="fancyvrb" id="fancyvrb2"><a 
 id="x1-6019r1"></a><span class="ectt-1000">  htxelatex priklad1</span></div>
<!--l. 91--><p class="indent" >   Kompilace se zastaví s chybovou hláškou
                                                                  

                                                                  
</p>
   <div class="verbatim" id="verbatim-1">
! LaTeX Error: Command ‘\acute&#x2019; already defined in ‘&#x2019;.
</div>
<!--l. 95--><p class="nopar" >
</p><!--l. 97--><p class="indent" >   To nám naznačuje, že něco není v pořádku. Podobných hlášek se
objeví více, můžete zmáčkout klávesu <span class="obeylines-h"><span class="verb"><span class="ectt-1000">r</span></span></span> a <span class="obeylines-h"><span class="verb"><span class="ectt-1000">enter</span></span></span> pro pokračování
kompilace bez přerušení. Kompilační skripty překládají dokument
<!--l. 99--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mrow 
><mn>3</mn><mo 
class="MathClass-bin">×</mo></mrow></math>. Je to
kvůli správnému fungování odkazů, <a 
href="#glo:tex4ht">TeX4ht</a> ukládá při každém průchodu
informace o odkazech do pomocných souborů, tento mechanismus funguje podobně
jako <span class="obeylines-h"><span class="verb"><span class="ectt-1000">\label</span><span class="ectt-1000"> - \ref</span></span></span> mechanismus v <span class="LATEX">L<span class="A">A</span><span class="TEX">T<span class="E">E</span>X</span></span>u.
</p><!--l. 104--><p class="indent" >   Po třech průchodech <span class="LATEX">L<span class="A">A</span><span class="TEX">T<span class="E">E</span>X</span></span>em přichází zpracování výstupního <a 
href="#glo:dvi">dvi</a>
souboru postprocesorem <a 
href="#glo:tex4ht-post">tex4ht</a>. Zde vidíme další chybovou hlášku:
                                                                  

                                                                  
</p>
   <div class="verbatim" id="verbatim-2">
(--- xdv font = [/home/mint/.fonts/LinLibertine_R.otf] (not implemented) ---)
 <br />--- warning --- Couldn&#x2019;t find font ‘[/home/mint/.fonts/LinLibertine_R.otf].ht
</div>
<!--l. 110--><p class="nopar" >
</p><!--l. 112--><p class="indent" >   Naneštěstí, chyba v postprocesoru <a 
href="#glo:tex4ht-post">tex4ht</a> znemožňuje použití opentype
fontů, pokud si otevřete výsledný html soubor <span class="obeylines-h"><span class="verb"><span class="ectt-1000">priklad1.html</span></span></span>, neobjeví se
žádný text. Chybové hlášky při překladu <span class="LATEX">L<span class="A">A</span><span class="TEX">T<span class="E">E</span>X</span></span>em byly způsobené
balíčkem <span class="obeylines-h"><span class="verb"><span class="ectt-1000">fontspec</span></span></span>. Jak řešit tuto situaci? Máme v zásadě dvě
možnosti:
</p><!--l. 115--><p class="indent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-6021x1">Upravit náš dokument tak, aby nepoužíval fontspec a opentype fonty
     při běhu <a 
href="#glo:tex4ht">TeX4ht</a>
     </li>
     <li 
  class="enumerate" id="x1-6023x2">Použít  <a 
href="https://github.com/michal-h21/fontspec" >experimentální  verzi</a>  balíčku  <span class="obeylines-h"><span class="verb"><span class="ectt-1000">fontspec</span></span></span>.  <a 
href="http://michal-h21.github.io/fontspec/fontspec-4ht.html" >Ukázkový
     dokument</a>.</li></ol>
<!--l. 124--><p class="indent" >   Druhá možnost je lehce experimentální, ukážeme si tedy první.
</p><!--l. 126--><p class="indent" >   <a 
href="#glo:tex4ht">TeX4ht</a> se snaží, jak je to jenom možné, aby autor nemusel upravovat
zdrojové kódy dokumentů. Někdy je to ale jediná možnost, jak zabránit
načtení balíčků, které zprůsobují problémy při kompilaci s <a 
href="#glo:tex4ht">TeX4ht</a>.
</p><!--l. 130--><p class="indent" >   Pro zjištění, jestli je dokument kompilován s <a 
href="#glo:tex4ht">TeX4ht</a>, můžeme použít
konstrukci:
</p>
   <div class="fancyvrb" id="fancyvrb3"><a 
 id="x1-6030r1"></a><span class="ectt-1000">  </span><span id="textcolor19"><span class="ectt-1000">\ifdefined</span></span><span id="textcolor20"><span class="ectt-1000">\HCode</span></span><br class="fancyvrb" /><a 
 id="x1-6032r2"></a><span class="ectt-1000">     Kod urceny pro TeX4ht</span><br class="fancyvrb" /><a 
 id="x1-6034r3"></a><span class="ectt-1000">  </span><span id="textcolor21"><span class="ectt-1000">\else</span></span><br class="fancyvrb" /><a 
 id="x1-6036r4"></a><span class="ectt-1000">     Kod urceny pro prevod do PDF</span><br class="fancyvrb" /><a 
 id="x1-6038r5"></a><span class="ectt-1000">  </span><span id="textcolor22"><span class="ectt-1000">\fi</span></span></div>
<!--l. 140--><p class="indent" >   Makro <span class="obeylines-h"><span class="verb"><span class="ectt-1000">\HCode</span></span></span> je definováno <a 
href="#glo:tex4ht">TeX4ht</a> a slouží k vkládání <a 
href="#glo:xml">XML</a> kódů do
dokumentu.
</p><!--l. 143--><p class="indent" >   Nyní náš dokument vypadá takto:
</p><!--l. 1--><p class="indent" >
</p>
   <div class="fancyvrb" id="fancyvrb4"><a 
 id="x1-6040r1"></a><span class="ectt-1000">  </span><span id="textcolor23"><span class="ectt-1000">\documentclass</span></span><span id="textcolor24"><span class="ectt-1000">{</span></span><span class="ectt-1000">article</span><span id="textcolor25"><span class="ectt-1000">}</span></span><br class="fancyvrb" /><a 
 id="x1-6042r2"></a><span class="ectt-1000">  </span><span id="textcolor26"><span class="ectt-1000">\ifdefined</span></span><span id="textcolor27"><span class="ectt-1000">\HCode</span></span><br class="fancyvrb" /><a 
 id="x1-6044r3"></a><span class="ectt-1000">  </span><span id="textcolor28"><span class="ectt-1000">\usepackage</span></span><span id="textcolor29"><span class="ectt-1000">[utf8]</span></span><span id="textcolor30"><span class="ectt-1000">{</span></span><span class="ectt-1000">inputenc</span><span id="textcolor31"><span class="ectt-1000">}</span></span>
<br class="fancyvrb" /><a 
 id="x1-6046r4"></a><span class="ectt-1000">  </span><span id="textcolor32"><span class="ectt-1000">\usepackage</span></span><span id="textcolor33"><span class="ectt-1000">[T1]</span></span><span id="textcolor34"><span class="ectt-1000">{</span></span><span class="ectt-1000">fontenc</span><span id="textcolor35"><span class="ectt-1000">}</span></span><br class="fancyvrb" /><a 
 id="x1-6048r5"></a><span class="ectt-1000">  </span><span id="textcolor36"><span class="ectt-1000">\else</span></span><br class="fancyvrb" /><a 
 id="x1-6050r6"></a><span class="ectt-1000">  </span><span id="textcolor37"><span class="ectt-1000">\usepackage</span></span><span id="textcolor38"><span class="ectt-1000">{</span></span><span class="ectt-1000">fontspec</span><span id="textcolor39"><span class="ectt-1000">}</span></span><br class="fancyvrb" /><a 
 id="x1-6052r7"></a><span class="ectt-1000">  </span><span id="textcolor40"><span class="ectt-1000">\setmainfont</span></span><span id="textcolor41"><span class="ectt-1000">{</span></span><span class="ectt-1000">Linux Libertine O</span><span id="textcolor42"><span class="ectt-1000">}</span></span>
<br class="fancyvrb" /><a 
 id="x1-6054r8"></a><span class="ectt-1000">  </span><span id="textcolor43"><span class="ectt-1000">\fi</span></span><br class="fancyvrb" /><a 
 id="x1-6056r9"></a><span class="ectt-1000">  </span><span id="textcolor44"><span class="ectt-1000">\begin</span></span><span id="textcolor45"><span class="ectt-1000">{</span></span><span class="ectt-1000">document</span><span id="textcolor46"><span class="ectt-1000">}</span></span><br class="fancyvrb" /><a 
 id="x1-6058r10"></a><span class="ectt-1000">  Příliš žluťoučký kůň úpěl </span><span id="textcolor47"><span class="ectt-1000">\textit</span></span><span id="textcolor48"><span class="ectt-1000">{</span></span><span class="ectt-1000">ďábelské ódy</span><span id="textcolor49"><span class="ectt-1000">}</span></span><span class="ectt-1000">.</span>
<br class="fancyvrb" /><a 
 id="x1-6060r11"></a><span class="ectt-1000">  Vyzkoušíme si také ligatury: grafika, finance, ffi.</span><br class="fancyvrb" /><a 
 id="x1-6062r12"></a><span class="ectt-1000">  </span><br class="fancyvrb" /><a 
 id="x1-6064r13"></a><span class="ectt-1000">  </span><span id="textcolor50"><span class="ectt-1000">\end</span></span><span id="textcolor51"><span class="ectt-1000">{</span></span><span class="ectt-1000">document</span><span id="textcolor52"><span class="ectt-1000">}</span></span></div>
<!--l. 147--><p class="indent" >   Místo <span class="obeylines-h"><span class="verb"><span class="ectt-1000">htxelatexu</span></span></span> nyní můžeme použít obyčejný <span class="obeylines-h"><span class="verb"><span class="ectt-1000">htlatex</span></span></span>, protože
dokument neobsahuje žádná makra vyžadující ke svému běhu
Xe<span class="TEX">T<span class="E">E</span>X</span>.
                                                                  

                                                                  
</p>
   <div class="verbatim" id="verbatim-3">
  htlatex priklad2
</div>
<!--l. 152--><p class="nopar" >
</p><!--l. 154--><p class="indent" >   Text výsledného dokumentu vypadá takto:
                                                                  

                                                                  
</p>
   <div class="verbatim" id="verbatim-4">
P&#x0026;#x0159;íli&#x0026;#353; &#x0026;#382;lutou&#x0026;#x010D;k&#x0026;#x00FD; k&#x0026;#x016F;&#x0026;#x0148; úp&#x0026;#x011B;l
 <br />&#x003C;span class=&#x0022;ecti-1000&#x0022;&#x003E;&#x0026;#x010F;&#x003C;/span&#x003E;&#x003C;span
 <br />class=&#x0022;ecti-1000&#x0022;&#x003E;ábelsk&#x003C;/span&#x003E;&#x003C;span
 <br />class=&#x0022;ecti-1000&#x0022;&#x003E;é &#x003C;/span&#x003E;&#x003C;span
 <br />class=&#x0022;ecti-1000&#x0022;&#x003E;ódy&#x003C;/span&#x003E;. Vyzkou&#x0026;#353;íme si také ligatury: grafika,
 <br />finance, ffi.
</div>
<!--l. 165--><p class="nopar" >
</p><!--l. 167--><p class="indent" >   Jak je vidět, není výsledek úplně hezký, některé akcentované znaky
byly nahrazené <span class="obeylines-h"><span class="verb"><span class="ectt-1000">html</span></span></span> entitami, ostatní jsou v kódování latin-2.
</p><!--l. 170--><p class="indent" >   <a 
href="#glo:tex4ht">TeX4ht</a> umí dokument uložit v kódování utf-8, jen je třeba přidat
několik parametrů:
                                                                  

                                                                  
</p>
   <div class="verbatim" id="verbatim-5">
htlatex priklad2 &#x0022;xhtml, charset=utf-8&#x0022; &#x0022; -cunihtf -utf8&#x0022;
</div>
<!--l. 175--><p class="nopar" >
</p><!--l. 177--><p class="indent" >   Tento ošklivý příkaz se skládá ze tří částí:
</p><!--l. 179--><p class="indent" >
     </p><dl class="description"><dt class="description">
<span class="ecbx-1000">priklad2</span> </dt><dd 
class="description"> Název souboru
     </dd><dt class="description">
<span class="ecbx-1000">&#x0022;xhtml, charset=utf-8&#x0022;</span> </dt><dd 
class="description"> parametry pro baliček <a 
href="#glo:tex4ht">TeX4ht</a>. První parametr
     označuje  document  type  dokumentu,  nebo  konfigurační  soubor
     (o  těch  si  povíme  více  později),  <span class="obeylines-h"><span class="verb"><span class="ectt-1000">charset=utf-8</span></span></span> určuje,  jaké
     kódování   bude   uvedenév   html   souboru.   Tato   volba   ovšem
     nezaručuje, že soubor v kódování utf8 skutečně bude!
     <!--l. 187--><p class="noindent" >Kompletní seznam možných parametrů je možné najít na <a 
href="http://www.cvr.cc/?p=504" >blogu
     CV Radhakrishnana</a>.
     </p></dd><dt class="description">
<span class="ecbx-1000">&#x0022; -cunihtf -utf8&#x0022;</span> </dt><dd 
class="description">  parametry  pro  program  <a 
href="#glo:tex4ht-post">tex4ht</a>,  určují,  že  bude
     výsledný soubor uložen v kódování utf8. Všimněte si mezery
     za uvozovkou, musí tam být.</dd></dl>
<!--l. 194--><p class="indent" >   Text nyní vypadá takto:
                                                                  

                                                                  
</p>
   <div class="verbatim" id="verbatim-6">
Příliš žluťoučký kůň úpěl &#x003C;span
 <br />class=&#x0022;ecti-1000&#x0022;&#x003E;ď&#x003C;/span&#x003E;&#x003C;span
 <br />class=&#x0022;ecti-1000&#x0022;&#x003E;ábelsk&#x003C;/span&#x003E;&#x003C;span
 <br />class=&#x0022;ecti-1000&#x0022;&#x003E;é &#x003C;/span&#x003E;&#x003C;span
 <br />class=&#x0022;ecti-1000&#x0022;&#x003E;ódy&#x003C;/span&#x003E;. Vyzkoušíme si také ligatury: grafika,
 <br />finance, ffi.
</div>
<!--l. 203--><p class="nopar" >
</p><!--l. 205--><p class="indent" >   Tím jsme vyřešili problém s kódováním znaků, ale stále jsou tu další
problémy. Některá slova jsou rozdělená mezi několik elementů <span class="obeylines-h"><span class="verb"><span class="ectt-1000">&#x003C;span&#x003E;</span></span></span> a text obsahuje
ligatury<span class="footnote-mark"><a 
href="#fn2x0" id="fn2x0-bk"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-6065f2"></a>.
</p><!--l. 210--><p class="indent" >   Tyto dva problémy nění snadné vyřešit čistě jenom v prostředí
<a 
href="#glo:tex4ht">TeX4ht</a>, což byl jeden z důvodů, proč jsem vytvořil <a 
href="https://github.com/michal-h21/make4ht" >make4ht</a>. S pomocí tohoto
nástroje můžete jednak zjednodušit předávání argumentů <span class="obeylines-h"><span class="verb"><span class="ectt-1000">htlatexu</span></span></span>, a
můžete využít různé filtry, které umožňují vyčistit vygenerované
soubory od nadbytečných elementů <span class="obeylines-h"><span class="verb"><span class="ectt-1000">&#x003C;span&#x003E;</span></span></span> nebo ligatur.
</p><!--l. 216--><p class="indent" >   Vytvoříme si <span class="obeylines-h"><span class="verb"><span class="ectt-1000">make</span></span></span> soubor, se stejným názvem jako <span class="TEX">T<span class="E">E</span>X</span>ový dokument,
jenom s příponou <span class="obeylines-h"><span class="verb"><span class="ectt-1000">.mk4</span></span></span>. V našem případě <span class="obeylines-h"><span class="verb"><span class="ectt-1000">priklad3.mk4</span></span></span>:
</p><!--l. 1--><p class="indent" >
</p>
   <div class="fancyvrb" id="fancyvrb5"><a 
 id="x1-6067r1"></a><span class="ectt-1000">  </span><span id="textcolor53"><span class="ectt-1000">local</span></span><span class="ectt-1000"> filter</span><span id="textcolor54"><span class="ectt-1000">=</span></span><span class="ectt-1000"> </span><span id="textcolor55"><span class="ectt-1000">require</span></span><span class="ectt-1000"> </span><span id="textcolor56"><span class="ectt-1000">&#x0022;</span></span><span id="textcolor57"><span class="ectt-1000">make4ht-filter&#x0022;</span></span>
<br class="fancyvrb" /><a 
 id="x1-6069r2"></a><span class="ectt-1000">  </span><span id="textcolor58"><span class="ectt-1000">local</span></span><span class="ectt-1000"> process </span><span id="textcolor59"><span class="ectt-1000">=</span></span><span class="ectt-1000"> filter{</span><span id="textcolor60"><span class="ectt-1000">&#x0022;</span></span><span id="textcolor61"><span class="ectt-1000">cleanspan&#x0022;</span></span><span class="ectt-1000">, </span><span id="textcolor62"><span class="ectt-1000">&#x0022;</span></span><span id="textcolor63"><span class="ectt-1000">fixligatures&#x0022;</span></span><span class="ectt-1000">}</span><br class="fancyvrb" /><a 
 id="x1-6071r3"></a><span class="ectt-1000">  Make:match(</span><span id="textcolor64"><span class="ectt-1000">&#x0022;</span></span><span id="textcolor65"><span class="ectt-1000">html$&#x0022;</span></span><span class="ectt-1000">,process)</span></div>
<!--l. 221--><p class="indent" >   V tomto případě využíváme pouze filtry. Build soubory pro <a 
href="#glo:make4ht">make4ht</a>
jsou skripty v jazyce LUA, takže můžeme využít standardních funkcí
jako je <span class="obeylines-h"><span class="verb"><span class="ectt-1000">require</span></span></span> pro nahrání knihovny <span class="obeylines-h"><span class="verb"><span class="ectt-1000">make4ht-filter</span></span></span>. Tato knihovna
vrací funkci, která vytváří další filtrovací funkce. V našem
případě vytváříme filtrovací funkci <span class="obeylines-h"><span class="verb"><span class="ectt-1000">process</span></span></span>, která obsahuje dva filtry –
<span class="obeylines-h"><span class="verb"><span class="ectt-1000">cleanspan</span></span></span> pro sloučení nadbytečných elementů <span class="obeylines-h"><span class="verb"><span class="ectt-1000">&#x003C;span&#x003E;</span></span></span> a <span class="obeylines-h"><span class="verb"><span class="ectt-1000">fixligatures</span></span></span> pro
rozdělení ligatur. S pomocí funkce <span class="obeylines-h"><span class="verb"><span class="ectt-1000">Make:match</span></span></span> pak aplikujeme tuto
filtrovací funkci na všechny vygenerované soubory s příponou <span class="obeylines-h"><span class="verb"><span class="ectt-1000">html</span></span></span>.
Další dostupné filtry a funkce <a 
href="#glo:make4ht">make4ht</a> jsou popsané na <a 
href="https://github.com/michal-h21/make4ht" >stránkách
projektu</a>.
</p><!--l. 234--><p class="indent" >   Překlad dokumentu je podstatně jednodušší:
                                                                  

                                                                  
</p>
   <div class="verbatim" id="verbatim-7">
make4ht -u priklad3
</div>
<!--l. 238--><p class="nopar" >
</p><!--l. 240--><p class="indent" >   A výsledek:
</p><!--l. 1--><p class="indent" >
</p>
   <div class="fancyvrb" id="fancyvrb6"><a 
 id="x1-6073r17"></a><span class="ectt-1000">  </span><span id="textcolor66"><span class="ecit-1000">&#x003C;!--l.</span><span class="ecit-1000"> 10--&#x003E;</span></span><span id="textcolor67"><span class="ectt-1000">&#x003C;p</span></span><span class="ectt-1000"> </span><span id="textcolor68"><span class="ectt-1000">class=</span></span><span id="textcolor69"><span class="ectt-1000">&#x0022;noindent&#x0022;</span></span><span class="ectt-1000"> </span><span id="textcolor70"><span class="ectt-1000">&#x003E;</span></span><span class="ectt-1000">Příliš žluťoučký kůň úpěl </span><span id="textcolor71"><span class="ectt-1000">&#x003C;span</span></span><span class="ectt-1000"> </span><span id="textcolor72"><span class="ectt-1000">class=</span></span><span id="textcolor73"><span class="ectt-1000">&#x0022;ecti-1000&#x0022;</span></span><span id="textcolor74"><span class="ectt-1000">&#x003E;</span></span><span class="ectt-1000">ďábelské ódy</span><span id="textcolor75"><span class="ectt-1000">&#x003C;/span&#x003E;</span></span><span class="ectt-1000">. Vyzkoušíme si také ligatury: grafika,</span>
<br class="fancyvrb" /><a 
 id="x1-6075r18"></a><span class="ectt-1000">  finance, ffi.</span><br class="fancyvrb" /><a 
 id="x1-6077r19"></a><span class="ectt-1000">  </span><span id="textcolor76"><span class="ectt-1000">&#x003C;/p&#x003E;</span></span></div>
<!--l. 244--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-70005"></a>Konfigurace balíčků</h3>
<!--l. 249--><p class="noindent" >
</p>
   <h3 class="sectionHead"><a 
 id="x1-80005"></a>Odkazy</h3>
<!--l. 249--><p class="noindent" >
   </p><dl class="thebibliography"><dt id="X0-Olsak13" class="thebibliography">
</dt><dd 
id="bib-1" class="thebibliography">
   <!--l. 249--><p class="noindent" ><a id="page.12"></a><a 
href="abcclanek.html" id="X0-" ></a>Olšák, Petr (2013). „TeX – 5 (příklad makra pro generování HTML)“.
   In: <span class="ecti-1000">AbcLinuxu.cz</span>. <span class="eccc-1000"><span class="small-caps">U</span><span class="small-caps">RL</span></span>: <a 
href="http://www.abclinuxu.cz/clanky/tex-5-priklad-makra-pro-generovani-html" class="url" ><span class="ectt-1000">http://www.abclinuxu.cz/clanky/tex-5-priklad-makra-pro-generovani-html</span></a>.</p></dd></dl>
   <div class="footnotes"><!--l. 46--><p class="indent" >     <span class="footnote-mark"><a 
href="#fn1x0-bk" id="fn1x0"><sup class="textsuperscript">1</sup></a></span><span class="ecrm-0800">Tvořím jednoduchý build systém </span><a 
href="https://github.com/michal-h21/make4ht" ><span class="ecrm-0800">make4ht</span></a> <span class="ecrm-0800">a od něj odvozený</span> <a 
href="https://github.com/michal-h21/tex4ebook" ><span class="ecrm-0800">tex4ebook</span></a> <span class="ecrm-0800">pro
přímou konverzi TeXu do formátů pro čtečky e-booků</span></p>
<!--l. 208--><p class="indent" >     <span class="footnote-mark"><a 
href="#fn2x0-bk" id="fn2x0"><sup class="textsuperscript">2</sup></a></span><span class="ecrm-0800">To z technických důvodů není ve výpisu vidět, ale můžete se podívat sami:</span>
<a 
href="priklady/priklad2.html" ><span class="ecrm-0800">priklad2.html</span></a></p>                                                                                                        </div>
 
</body></html> 

                                                                  


